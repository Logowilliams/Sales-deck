"0","#create gross_unit by WMT# data"
"0","tot_sales%>%"
"0","  mutate(gross_unit = `POS Qty`+`Total Customer Item Return`)%>%"
"0","  rename(WMT = `Item Nbr`)%>%"
"0","  select(WMT, gross_unit, `Store Nbr`) -> sku_month"
"2","Adding missing grouping variables: `WM Week`, `Brand Desc`, `Vendor Stk Nbr`, `Item Flags`
"
"0","for (storeType in c(0,99999)) {"
"0","  checkSku <- filter(sku_month, `Store Nbr` == storeType)"
"0","  "
"0","  #check for missing SKUs"
"0","  missingSkus <- c()"
"0","  for(line in checkSku$WMT){"
"0","    line <- str_trim(line)"
"0","    if(line %in% store_sales_sku$WMT){"
"0","      #nothing"
"0","    }else{"
"0","      missingSkus <- c(missingSkus, line)"
"0","      newSku <- data.frame()"
"0","    }"
"0","  }"
"0","  #"
"0","  for (value in missingSkus) {"
"0","      checkSku%>%"
"0","          filter(WMT == value)-> skuSub"
"0","      newSku <- bind_rows(newSku, skuSub)"
"0","}"
"0",""
"0","  if(length(missingSkus) > 0){"
"0","    write.xlsx(newSku, here(""data"", ""newSalesSKU.xlsx"", sep = """"), overwrite = TRUE)"
"0","    {stop(length(missingSkus), "" new SKU values in store "", storeType, ""! Copy new SKUs from newSalesSKU.xlsx to store_sales_sku.xlsx and rerun code"")}"
"0","}"
"0","}"
"0",""
"0","store_sales_sku$WMT <- as.character(store_sales_sku$WMT)"
"0","#merge with WMT# sales reference data"
"0","tot_sales_sku <- left_join(store_sales_sku, sku_month, by = ""WMT"")"
"0","#Replace NA with 0"
"0","tot_sales_sku$gross_unit[is.na(tot_sales_sku$gross_unit)] <- 0"
